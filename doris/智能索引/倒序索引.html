<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apache Doris å€’æ’ç´¢å¼•åŠ¨æ€æ¼”ç¤º</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 30px;
        }
        .title {
            text-align: center;
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 30px;
            font-weight: bold;
        }
        .control-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }
        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }
        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        .demo-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        .data-section, .index-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }
        .section-title {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }
        .data-table th, .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .data-table th {
            background: #3498db;
            color: white;
            font-weight: bold;
        }
        .data-table tr {
            transition: all 0.3s ease;
        }
        .data-table tr.highlight {
            background: #ffeb3b !important;
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .index-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .term-dict, .posting-lists {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .term-item, .posting-item {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateX(-20px);
        }
        .term-item {
            background: #e8f4f8;
            border-left: 4px solid #2980b9;
            font-weight: bold;
            color: #2980b9;
        }
        .posting-item {
            background: #f0f8e8;
            border-left: 4px solid #27ae60;
            color: #27ae60;
            font-family: 'Courier New', monospace;
        }
        .term-item.show, .posting-item.show {
            opacity: 1;
            transform: translateX(0);
        }
        .term-item.active, .posting-item.active {
            background: #ffeb3b;
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .query-section {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #ffc107;
            margin-bottom: 20px;
        }
        .query-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
        }
        .query-input:focus {
            outline: none;
            border-color: #3498db;
        }
        .query-result {
            background: #d4edda;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
            margin-top: 15px;
            min-height: 60px;
            display: none;
        }
        .process-indicator {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            color: #e74c3c;
            font-weight: bold;
        }
        .step-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }
        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            transition: all 0.3s ease;
        }
        .step.active {
            background: #3498db;
            transform: scale(1.2);
        }
        .step.completed {
            background: #27ae60;
        }
        .arrow-step {
            font-size: 24px;
            color: #3498db;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }
        .stats-panel {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        /* åœºæ™¯å±•ç¤ºæ ·å¼ */
        .scenarios-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            border-left: 5px solid #3498db;
        }

        .scenarios-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 25px 0;
        }

        .scenario-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .scenario-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3498db, #2980b9);
        }

        .scenario-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .scenario-card.log-analysis::before {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
        }

        .scenario-card.content-search::before {
            background: linear-gradient(90deg, #9b59b6, #8e44ad);
        }

        .scenario-card.ecommerce::before {
            background: linear-gradient(90deg, #f39c12, #e67e22);
        }

        .scenario-card.user-behavior::before {
            background: linear-gradient(90deg, #27ae60, #229954);
        }

        .scenario-card.security::before {
            background: linear-gradient(90deg, #34495e, #2c3e50);
        }

        .scenario-card.media::before {
            background: linear-gradient(90deg, #e91e63, #ad1457);
        }

        .scenario-icon {
            font-size: 3em;
            text-align: center;
            margin-bottom: 15px;
        }

        .scenario-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 15px;
        }

        .scenario-desc {
            font-size: 14px;
            line-height: 1.6;
            color: #555;
            margin-bottom: 15px;
        }

        .scenario-desc strong {
            color: #2c3e50;
        }

        .scenario-example {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #3498db;
        }

        .example-title {
            font-size: 12px;
            font-weight: bold;
            color: #666;
            margin-bottom: 8px;
        }

        .scenario-example code {
            font-size: 12px;
            color: #2c3e50;
            background: none;
            padding: 0;
            word-break: break-all;
        }

        .performance-comparison {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .performance-comparison h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .comparison-table {
            overflow-x: auto;
        }

        .perf-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .perf-table th, .perf-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
        }

        .perf-table th {
            background: #3498db;
            color: white;
            font-weight: bold;
        }

        .perf-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .improvement {
            background: #d4edda;
            color: #155724;
            font-weight: bold;
            border-radius: 4px;
        }

        .best-practices {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .best-practices h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
        }

        .practices-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .practice-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .practice-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .practice-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .practice-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .practice-desc {
            font-size: 14px;
            color: #555;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">Apache Doris å€’æ’ç´¢å¼•åŠ¨æ€æ¼”ç¤º</h1>

        <div class="control-panel">
            <button class="btn btn-primary" onclick="startIndexBuilding()">å¼€å§‹æ„å»ºç´¢å¼•</button>
            <button class="btn btn-success" onclick="showQueryDemo()">æŸ¥è¯¢æ¼”ç¤º</button>
            <button class="btn btn-warning" onclick="resetDemo()">é‡ç½®æ¼”ç¤º</button>
            <button class="btn btn-danger" onclick="showPerformanceComparison()">æ€§èƒ½å¯¹æ¯”</button>
        </div>

        <div class="step-indicator" id="stepIndicator">
            <div class="step" id="step1">1</div>
            <div class="arrow-step">â†’</div>
            <div class="step" id="step2">2</div>
            <div class="arrow-step">â†’</div>
            <div class="step" id="step3">3</div>
            <div class="arrow-step">â†’</div>
            <div class="step" id="step4">4</div>
        </div>

        <div class="process-indicator" id="processIndicator"></div>

        <div class="demo-area">
            <div class="data-section">
                <div class="section-title">ğŸ“Š åŸå§‹æ•°æ®è¡¨</div>
                <table class="data-table" id="dataTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>å†…å®¹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-id="1">
                            <td>1</td>
                            <td>Apache Dorisæ˜¯é«˜æ€§èƒ½åˆ†ææ•°æ®åº“</td>
                        </tr>
                        <tr data-id="2">
                            <td>2</td>
                            <td>å¤§æ•°æ®å¤„ç†éœ€è¦Apache Sparkå’ŒDoris</td>
                        </tr>
                        <tr data-id="3">
                            <td>3</td>
                            <td>OLAPå¼•æ“æä¾›é«˜æ€§èƒ½åˆ†æèƒ½åŠ›</td>
                        </tr>
                        <tr data-id="4">
                            <td>4</td>
                            <td>Apacheç”Ÿæ€åŒ…æ‹¬å¤šä¸ªå¼€æºé¡¹ç›®</td>
                        </tr>
                        <tr data-id="5">
                            <td>5</td>
                            <td>å®æ—¶æ•°æ®åˆ†ææ˜¯ç°ä»£ä¼ä¸šçš„æ ¸å¿ƒéœ€æ±‚</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="index-section">
                <div class="section-title">ğŸ” å€’æ’ç´¢å¼•ç»“æ„</div>
                <div class="index-container">
                    <div class="term-dict">
                        <h4 style="text-align: center; color: #2980b9; margin-bottom: 15px;">è¯å…¸ (Term Dictionary)</h4>
                        <div id="termDictionary"></div>
                    </div>
                    <div class="posting-lists">
                        <h4 style="text-align: center; color: #27ae60; margin-bottom: 15px;">å€’æ’åˆ—è¡¨ (Posting Lists)</h4>
                        <div id="postingLists"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="query-section" id="querySection" style="display: none;">
            <div class="section-title">ğŸ” æŸ¥è¯¢æµ‹è¯•</div>
            <input type="text" class="query-input" id="queryInput" placeholder="è¾“å…¥æŸ¥è¯¢å…³é”®è¯ï¼Œå¦‚ï¼šApacheã€Dorisã€é«˜æ€§èƒ½ç­‰">
            <button class="btn btn-success" onclick="executeQuery()">æ‰§è¡ŒæŸ¥è¯¢</button>
            <div class="query-result" id="queryResult"></div>
        </div>

        <div class="stats-panel" id="statsPanel" style="display: none;">
            <div class="stat-item">
                <div class="stat-value" id="totalTerms">0</div>
                <div class="stat-label">æ€»è¯æ±‡æ•°</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalDocs">5</div>
                <div class="stat-label">æ–‡æ¡£æ•°é‡</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="queryTime">0ms</div>
                <div class="stat-label">æŸ¥è¯¢è€—æ—¶</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="matchedDocs">0</div>
                <div class="stat-label">åŒ¹é…æ–‡æ¡£</div>
            </div>
        </div>

        <!-- å€’æ’ç´¢å¼•é€‚ç”¨åœºæ™¯å±•ç¤º -->
        <div class="scenarios-section">
            <div class="section-title">ğŸ¯ Apache Doris å€’æ’ç´¢å¼•é€‚ç”¨åœºæ™¯</div>

            <div class="scenarios-grid">
                <div class="scenario-card log-analysis">
                    <div class="scenario-icon">ğŸ“Š</div>
                    <div class="scenario-title">æ—¥å¿—åˆ†æä¸ç›‘æ§</div>
                    <div class="scenario-desc">
                        <strong>åº”ç”¨åœºæ™¯ï¼š</strong>ç³»ç»Ÿæ—¥å¿—ã€åº”ç”¨æ—¥å¿—ã€è®¿é—®æ—¥å¿—åˆ†æ<br>
                        <strong>æŸ¥è¯¢ç‰¹ç‚¹ï¼š</strong>æŒ‰é”™è¯¯ç±»å‹ã€IPåœ°å€ã€ç”¨æˆ·è¡Œä¸ºç­‰å…³é”®è¯æ£€ç´¢<br>
                        <strong>æ€§èƒ½æå‡ï¼š</strong>å°†æ—¥å¿—æ£€ç´¢ä»åˆ†é’Ÿçº§é™è‡³ç§’çº§
                    </div>
                    <div class="scenario-example">
                        <div class="example-title">å…¸å‹æŸ¥è¯¢ï¼š</div>
                        <code>SELECT * FROM access_logs WHERE message MATCH 'ERROR 404'</code>
                    </div>
                </div>

                <div class="scenario-card content-search">
                    <div class="scenario-icon">ğŸ”</div>
                    <div class="scenario-title">å†…å®¹æœç´¢å¹³å°</div>
                    <div class="scenario-desc">
                        <strong>åº”ç”¨åœºæ™¯ï¼š</strong>æ–‡æ¡£ç®¡ç†ã€çŸ¥è¯†åº“ã€å†…å®¹ç®¡ç†ç³»ç»Ÿ<br>
                        <strong>æŸ¥è¯¢ç‰¹ç‚¹ï¼š</strong>å…¨æ–‡æœç´¢ã€å…³é”®è¯åŒ¹é…ã€ç›¸å…³æ€§æ’åº<br>
                        <strong>æ€§èƒ½æå‡ï¼š</strong>æ”¯æŒæ¯«ç§’çº§å…¨æ–‡æ£€ç´¢å“åº”
                    </div>
                    <div class="scenario-example">
                        <div class="example-title">å…¸å‹æŸ¥è¯¢ï¼š</div>
                        <code>SELECT title, content FROM documents WHERE content MATCH 'æ•°æ®åˆ†æ AND æœºå™¨å­¦ä¹ '</code>
                    </div>
                </div>

                <div class="scenario-card ecommerce">
                    <div class="scenario-icon">ğŸ›’</div>
                    <div class="scenario-title">ç”µå•†å•†å“æœç´¢</div>
                    <div class="scenario-desc">
                        <strong>åº”ç”¨åœºæ™¯ï¼š</strong>å•†å“åç§°ã€æè¿°ã€æ ‡ç­¾çš„å¿«é€Ÿæ£€ç´¢<br>
                        <strong>æŸ¥è¯¢ç‰¹ç‚¹ï¼š</strong>æ¨¡ç³ŠåŒ¹é…ã€å¤šæ¡ä»¶ç»„åˆã€å®æ—¶ç­›é€‰<br>
                        <strong>æ€§èƒ½æå‡ï¼š</strong>äº¿çº§å•†å“åº“ä¸­å®ç°æ¯«ç§’çº§æœç´¢
                    </div>
                    <div class="scenario-example">
                        <div class="example-title">å…¸å‹æŸ¥è¯¢ï¼š</div>
                        <code>SELECT * FROM products WHERE name LIKE '%æ‰‹æœº%' AND tags MATCH 'Apple'</code>
                    </div>
                </div>

                <div class="scenario-card user-behavior">
                    <div class="scenario-icon">ğŸ‘¥</div>
                    <div class="scenario-title">ç”¨æˆ·è¡Œä¸ºåˆ†æ</div>
                    <div class="scenario-desc">
                        <strong>åº”ç”¨åœºæ™¯ï¼š</strong>ç”¨æˆ·ç”»åƒã€è¡Œä¸ºè½¨è¿¹ã€åå¥½åˆ†æ<br>
                        <strong>æŸ¥è¯¢ç‰¹ç‚¹ï¼š</strong>å¤šç»´åº¦æ ‡ç­¾æŸ¥è¯¢ã€è¡Œä¸ºæ¨¡å¼åŒ¹é…<br>
                        <strong>æ€§èƒ½æå‡ï¼š</strong>å®æ—¶ç”¨æˆ·ç¾¤ä½“ç­›é€‰å’Œåˆ†æ
                    </div>
                    <div class="scenario-example">
                        <div class="example-title">å…¸å‹æŸ¥è¯¢ï¼š</div>
                        <code>SELECT user_id FROM user_profiles WHERE interests MATCH 'ç§‘æŠ€ AND æŠ•èµ„'</code>
                    </div>
                </div>

                <div class="scenario-card security">
                    <div class="scenario-icon">ğŸ›¡ï¸</div>
                    <div class="scenario-title">å®‰å…¨äº‹ä»¶æ£€æµ‹</div>
                    <div class="scenario-desc">
                        <strong>åº”ç”¨åœºæ™¯ï¼š</strong>å®‰å…¨æ—¥å¿—åˆ†æã€å¨èƒæ£€æµ‹ã€å¼‚å¸¸è¡Œä¸ºè¯†åˆ«<br>
                        <strong>æŸ¥è¯¢ç‰¹ç‚¹ï¼š</strong>å¤æ‚æ¨¡å¼åŒ¹é…ã€æ­£åˆ™è¡¨è¾¾å¼æŸ¥è¯¢<br>
                        <strong>æ€§èƒ½æå‡ï¼š</strong>å®æ—¶å®‰å…¨å¨èƒæ£€æµ‹å’Œå‘Šè­¦
                    </div>
                    <div class="scenario-example">
                        <div class="example-title">å…¸å‹æŸ¥è¯¢ï¼š</div>
                        <code>SELECT * FROM security_logs WHERE event MATCH 'SQLæ³¨å…¥' OR message REGEXP '.*DROP TABLE.*'</code>
                    </div>
                </div>

                <div class="scenario-card media">
                    <div class="scenario-icon">ğŸ“º</div>
                    <div class="scenario-title">åª’ä½“å†…å®¹åˆ†æ</div>
                    <div class="scenario-desc">
                        <strong>åº”ç”¨åœºæ™¯ï¼š</strong>æ–°é—»æ–‡ç« ã€è§†é¢‘å­—å¹•ã€ç¤¾äº¤åª’ä½“å†…å®¹åˆ†æ<br>
                        <strong>æŸ¥è¯¢ç‰¹ç‚¹ï¼š</strong>æƒ…æ„Ÿåˆ†æã€è¯é¢˜å‘ç°ã€å†…å®¹åˆ†ç±»<br>
                        <strong>æ€§èƒ½æå‡ï¼š</strong>æµ·é‡åª’ä½“å†…å®¹çš„å®æ—¶åˆ†æå¤„ç†
                    </div>
                    <div class="scenario-example">
                        <div class="example-title">å…¸å‹æŸ¥è¯¢ï¼š</div>
                        <code>SELECT * FROM news_articles WHERE content MATCH 'äººå·¥æ™ºèƒ½' AND sentiment = 'positive'</code>
                    </div>
                </div>
            </div>

            <div class="performance-comparison">
                <h3>ğŸ“ˆ æ€§èƒ½å¯¹æ¯”ï¼šä¼ ç»ŸæŸ¥è¯¢ vs å€’æ’ç´¢å¼•</h3>
                <div class="comparison-table">
                    <table class="perf-table">
                        <thead>
                            <tr>
                                <th>æ•°æ®è§„æ¨¡</th>
                                <th>ä¼ ç»ŸLIKEæŸ¥è¯¢</th>
                                <th>å€’æ’ç´¢å¼•æŸ¥è¯¢</th>
                                <th>æ€§èƒ½æå‡</th>
                                <th>é€‚ç”¨åœºæ™¯</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1ä¸‡æ¡è®°å½•</td>
                                <td>100ms</td>
                                <td>5ms</td>
                                <td class="improvement">20x</td>
                                <td>å°å‹åº”ç”¨</td>
                            </tr>
                            <tr>
                                <td>100ä¸‡æ¡è®°å½•</td>
                                <td>10s</td>
                                <td>10ms</td>
                                <td class="improvement">1000x</td>
                                <td>ä¸­å‹ä¼ä¸š</td>
                            </tr>
                            <tr>
                                <td>1äº¿æ¡è®°å½•</td>
                                <td>16min</td>
                                <td>50ms</td>
                                <td class="improvement">20000x</td>
                                <td>å¤§å‹äº’è”ç½‘</td>
                            </tr>
                            <tr>
                                <td>10äº¿æ¡è®°å½•</td>
                                <td>2.7h</td>
                                <td>100ms</td>
                                <td class="improvement">100000x</td>
                                <td>è¶…å¤§è§„æ¨¡</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="best-practices">
                <h3>ğŸ’¡ å€’æ’ç´¢å¼•æœ€ä½³å®è·µ</h3>
                <div class="practices-grid">
                    <div class="practice-item">
                        <div class="practice-icon">âš¡</div>
                        <div class="practice-title">é€‰æ‹©åˆé€‚çš„å­—æ®µ</div>
                        <div class="practice-desc">å¯¹ç»å¸¸ç”¨äºæ–‡æœ¬æœç´¢çš„å­—æ®µå»ºç«‹å€’æ’ç´¢å¼•ï¼Œå¦‚å•†å“åç§°ã€ç”¨æˆ·è¯„è®ºã€æ—¥å¿—æ¶ˆæ¯ç­‰</div>
                    </div>
                    <div class="practice-item">
                        <div class="practice-icon">ğŸ¯</div>
                        <div class="practice-title">åˆç†é…ç½®åˆ†è¯å™¨</div>
                        <div class="practice-desc">æ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„åˆ†è¯å™¨ï¼Œä¸­æ–‡å†…å®¹ä½¿ç”¨ä¸­æ–‡åˆ†è¯ï¼Œè‹±æ–‡å†…å®¹ä½¿ç”¨è‹±æ–‡åˆ†è¯</div>
                    </div>
                    <div class="practice-item">
                        <div class="practice-icon">ğŸ“Š</div>
                        <div class="practice-title">ç›‘æ§ç´¢å¼•å¤§å°</div>
                        <div class="practice-desc">å®šæœŸç›‘æ§å€’æ’ç´¢å¼•çš„å­˜å‚¨ç©ºé—´å ç”¨ï¼Œé€šå¸¸ä¸ºåŸæ•°æ®çš„10%-30%</div>
                    </div>
                    <div class="practice-item">
                        <div class="practice-icon">ğŸ”„</div>
                        <div class="practice-title">å¢é‡æ›´æ–°ç­–ç•¥</div>
                        <div class="practice-desc">å¯¹äºé¢‘ç¹æ›´æ–°çš„æ•°æ®ï¼Œé‡‡ç”¨å¢é‡æ›´æ–°ç­–ç•¥ï¼Œé¿å…å…¨é‡é‡å»ºç´¢å¼•</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let invertedIndex = {};
        let isBuilding = false;
        let currentStep = 0;

        const sampleData = [
            { id: 1, content: "Apache Dorisæ˜¯é«˜æ€§èƒ½åˆ†ææ•°æ®åº“" },
            { id: 2, content: "å¤§æ•°æ®å¤„ç†éœ€è¦Apache Sparkå’ŒDoris" },
            { id: 3, content: "OLAPå¼•æ“æä¾›é«˜æ€§èƒ½åˆ†æèƒ½åŠ›" },
            { id: 4, content: "Apacheç”Ÿæ€åŒ…æ‹¬å¤šä¸ªå¼€æºé¡¹ç›®" },
            { id: 5, content: "å®æ—¶æ•°æ®åˆ†ææ˜¯ç°ä»£ä¼ä¸šçš„æ ¸å¿ƒéœ€æ±‚" }
        ];

        // ç®€å•ä¸­æ–‡åˆ†è¯å‡½æ•°
        function tokenize(text) {
            // ç®€åŒ–çš„åˆ†è¯ï¼Œå®é™…åº”ç”¨ä¸­ä¼šä½¿ç”¨æ›´å¤æ‚çš„åˆ†è¯å™¨
            const terms = [];
            const patterns = [
                'Apache', 'Doris', 'Spark', 'OLAP',
                'é«˜æ€§èƒ½', 'åˆ†æ', 'æ•°æ®åº“', 'å¤§æ•°æ®', 'å¤„ç†',
                'å¼•æ“', 'èƒ½åŠ›', 'ç”Ÿæ€', 'å¼€æº', 'é¡¹ç›®',
                'å®æ—¶', 'æ•°æ®', 'ç°ä»£', 'ä¼ä¸š', 'æ ¸å¿ƒ', 'éœ€æ±‚'
            ];

            patterns.forEach(pattern => {
                if (text.includes(pattern)) {
                    terms.push(pattern);
                }
            });

            return terms;
        }

        function updateStepIndicator(step) {
            for (let i = 1; i <= 4; i++) {
                const stepEl = document.getElementById(`step${i}`);
                stepEl.classList.remove('active', 'completed');
                if (i < step) {
                    stepEl.classList.add('completed');
                } else if (i === step) {
                    stepEl.classList.add('active');
                }
            }
        }

        function setProcessIndicator(text) {
            const indicator = document.getElementById('processIndicator');
            indicator.innerHTML = text;
        }

        async function startIndexBuilding() {
            if (isBuilding) return;
            isBuilding = true;

            resetDemo();
            invertedIndex = {};

            // æ­¥éª¤1ï¼šæ•°æ®åˆ†æ
            updateStepIndicator(1);
            setProcessIndicator('ğŸ“ æ­¥éª¤1ï¼šåˆ†ææ–‡æ¡£å†…å®¹...');

            for (let i = 0; i < sampleData.length; i++) {
                const row = document.querySelector(`tr[data-id="${sampleData[i].id}"]`);
                row.classList.add('highlight');
                await sleep(800);
                row.classList.remove('highlight');
            }

            await sleep(1000);

            // æ­¥éª¤2ï¼šåˆ†è¯å¤„ç†
            updateStepIndicator(2);
            setProcessIndicator('ğŸ”¤ æ­¥éª¤2ï¼šå¯¹æ–‡æ¡£è¿›è¡Œåˆ†è¯å¤„ç†...');

            const allTerms = new Set();
            const docTerms = {};

            for (const doc of sampleData) {
                const terms = tokenize(doc.content);
                docTerms[doc.id] = terms;
                terms.forEach(term => allTerms.add(term));
            }

            await sleep(1500);

            // æ­¥éª¤3ï¼šæ„å»ºè¯å…¸
            updateStepIndicator(3);
            setProcessIndicator('ğŸ“š æ­¥éª¤3ï¼šæ„å»ºè¯å…¸å’Œå€’æ’åˆ—è¡¨...');

            const termDict = document.getElementById('termDictionary');
            const postingLists = document.getElementById('postingLists');

            let termIndex = 0;
            for (const term of Array.from(allTerms).sort()) {
                const docIds = [];

                for (const doc of sampleData) {
                    if (docTerms[doc.id].includes(term)) {
                        docIds.push(doc.id);
                    }
                }

                invertedIndex[term] = docIds;

                // åŠ¨ç”»æ˜¾ç¤ºè¯å…¸é¡¹
                const termItem = document.createElement('div');
                termItem.className = 'term-item';
                termItem.innerHTML = `${term} â†’ [${docIds.join(',')}]`;
                termDict.appendChild(termItem);

                setTimeout(() => {
                    termItem.classList.add('show');
                }, termIndex * 200);

                // åŠ¨ç”»æ˜¾ç¤ºå€’æ’åˆ—è¡¨
                const postingItem = document.createElement('div');
                postingItem.className = 'posting-item';
                postingItem.innerHTML = `${term}: ${docIds.map(id => `Doc${id}`).join(', ')}`;
                postingLists.appendChild(postingItem);

                setTimeout(() => {
                    postingItem.classList.add('show');
                }, termIndex * 200 + 100);

                termIndex++;
            }

            await sleep(termIndex * 200 + 1000);

            // æ­¥éª¤4ï¼šç´¢å¼•æ„å»ºå®Œæˆ
            updateStepIndicator(4);
            setProcessIndicator('âœ… æ­¥éª¤4ï¼šå€’æ’ç´¢å¼•æ„å»ºå®Œæˆï¼');

            // æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
            document.getElementById('statsPanel').style.display = 'block';
            document.getElementById('totalTerms').textContent = allTerms.size;

            isBuilding = false;
        }

        function showQueryDemo() {
            if (Object.keys(invertedIndex).length === 0) {
                alert('è¯·å…ˆæ„å»ºç´¢å¼•ï¼');
                return;
            }

            document.getElementById('querySection').style.display = 'block';
            document.getElementById('querySection').scrollIntoView({ behavior: 'smooth' });
        }

        async function executeQuery() {
            const query = document.getElementById('queryInput').value.trim();
            if (!query) {
                alert('è¯·è¾“å…¥æŸ¥è¯¢å…³é”®è¯ï¼');
                return;
            }

            const startTime = performance.now();

            // é«˜äº®æŸ¥è¯¢è¿‡ç¨‹
            setProcessIndicator(`ğŸ” æ­£åœ¨æŸ¥è¯¢ "${query}"...`);

            // æŸ¥æ‰¾åŒ¹é…çš„è¯æ±‡
            const matchedTerms = Object.keys(invertedIndex).filter(term =>
                term.toLowerCase().includes(query.toLowerCase()) ||
                query.toLowerCase().includes(term.toLowerCase())
            );

            if (matchedTerms.length === 0) {
                document.getElementById('queryResult').style.display = 'block';
                document.getElementById('queryResult').innerHTML =
                    `<strong>æŸ¥è¯¢ç»“æœï¼š</strong>æœªæ‰¾åˆ°åŒ…å« "${query}" çš„æ–‡æ¡£`;
                return;
            }

            // é«˜äº®åŒ¹é…çš„è¯å…¸é¡¹
            const termItems = document.querySelectorAll('.term-item');
            termItems.forEach(item => {
                item.classList.remove('active');
                const termText = item.textContent.split(' â†’')[0];
                if (matchedTerms.includes(termText)) {
                    item.classList.add('active');
                }
            });

            // é«˜äº®åŒ¹é…çš„å€’æ’åˆ—è¡¨
            const postingItems = document.querySelectorAll('.posting-item');
            postingItems.forEach(item => {
                item.classList.remove('active');
                const termText = item.textContent.split(':')[0];
                if (matchedTerms.includes(termText)) {
                    item.classList.add('active');
                }
            });

            await sleep(1000);

            // åˆå¹¶ç»“æœ
            let resultDocs = new Set();
            matchedTerms.forEach(term => {
                invertedIndex[term].forEach(docId => resultDocs.add(docId));
            });

            const endTime = performance.now();
            const queryTime = Math.round(endTime - startTime);

            // é«˜äº®ç»“æœæ–‡æ¡£
            document.querySelectorAll('tr[data-id]').forEach(row => {
                row.classList.remove('highlight');
                const docId = parseInt(row.getAttribute('data-id'));
                if (resultDocs.has(docId)) {
                    row.classList.add('highlight');
                }
            });

            // æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ
            const resultEl = document.getElementById('queryResult');
            resultEl.style.display = 'block';
            resultEl.innerHTML = `
                <strong>æŸ¥è¯¢ç»“æœï¼š</strong><br>
                åŒ¹é…è¯æ±‡: ${matchedTerms.join(', ')}<br>
                æ‰¾åˆ° ${resultDocs.size} ä¸ªæ–‡æ¡£: [${Array.from(resultDocs).join(', ')}]<br>
                <strong>æŸ¥è¯¢è€—æ—¶: ${queryTime}ms</strong><br>
                <em>ğŸ’¡ ä¼ ç»Ÿå…¨è¡¨æ‰«æéœ€è¦ ${sampleData.length * 10}msï¼Œå€’æ’ç´¢å¼•æå‡äº† ${Math.round(sampleData.length * 10 / queryTime)}x æ€§èƒ½ï¼</em>
            `;

            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            document.getElementById('queryTime').textContent = `${queryTime}ms`;
            document.getElementById('matchedDocs').textContent = resultDocs.size;

            setProcessIndicator(`âœ… æŸ¥è¯¢å®Œæˆï¼æ‰¾åˆ° ${resultDocs.size} ä¸ªåŒ¹é…æ–‡æ¡£`);
        }

        function resetDemo() {
            // æ¸…é™¤é«˜äº®
            document.querySelectorAll('.highlight').forEach(el => {
                el.classList.remove('highlight');
            });

            // æ¸…é™¤ç´¢å¼•æ˜¾ç¤º
            document.getElementById('termDictionary').innerHTML = '';
            document.getElementById('postingLists').innerHTML = '';

            // éšè—æŸ¥è¯¢å’Œç»Ÿè®¡é¢æ¿
            document.getElementById('querySection').style.display = 'none';
            document.getElementById('statsPanel').style.display = 'none';
            document.getElementById('queryResult').style.display = 'none';

            // é‡ç½®æ­¥éª¤æŒ‡ç¤ºå™¨
            updateStepIndicator(0);
            setProcessIndicator('');

            // æ¸…ç©ºæŸ¥è¯¢è¾“å…¥
            document.getElementById('queryInput').value = '';

            isBuilding = false;
        }

        function showPerformanceComparison() {
            const comparison = `
ğŸ“Š æ€§èƒ½å¯¹æ¯”åˆ†æï¼š

ğŸ” ä¼ ç»ŸæŸ¥è¯¢ (å…¨è¡¨æ‰«æ):
â€¢ éœ€è¦é€è¡Œæ£€æŸ¥æ¯ä¸ªæ–‡æ¡£
â€¢ æ—¶é—´å¤æ‚åº¦: O(n*m), n=æ–‡æ¡£æ•°, m=æ–‡æ¡£é•¿åº¦
â€¢ é¢„ä¼°è€—æ—¶: ${sampleData.length * 10}ms

âš¡ å€’æ’ç´¢å¼•æŸ¥è¯¢:
â€¢ ç›´æ¥å®šä½åˆ°åŒ…å«å…³é”®è¯çš„æ–‡æ¡£
â€¢ æ—¶é—´å¤æ‚åº¦: O(k), k=åŒ¹é…æ–‡æ¡£æ•°
â€¢ å®é™…è€—æ—¶: ~5ms

ğŸš€ æ€§èƒ½æå‡: ${Math.round(sampleData.length * 10 / 5)}x å€ï¼

ğŸ“ˆ éšç€æ•°æ®é‡å¢é•¿ï¼Œæ€§èƒ½å·®è·ä¼šæ›´åŠ æ˜æ˜¾ï¼š
â€¢ 100ä¸‡æ–‡æ¡£ï¼šä¼ ç»ŸæŸ¥è¯¢ ~10ç§’ï¼Œç´¢å¼•æŸ¥è¯¢ ~10ms
â€¢ 1000ä¸‡æ–‡æ¡£ï¼šä¼ ç»ŸæŸ¥è¯¢ ~100ç§’ï¼Œç´¢å¼•æŸ¥è¯¢ ~20ms
            `;

            alert(comparison);
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.onload = function() {
            setProcessIndicator('ğŸ‘‹ æ¬¢è¿ä½¿ç”¨ Apache Doris å€’æ’ç´¢å¼•æ¼”ç¤ºï¼ç‚¹å‡» "å¼€å§‹æ„å»ºç´¢å¼•" å¼€å§‹ä½“éªŒ');
        };
    </script>
</body>
</html>